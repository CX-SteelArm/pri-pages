!function a(o,s,u){function l(e,t){if(!s[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[e]={exports:{}};o[e][0].call(r.exports,function(t){return l(o[e][1][t]||t)},r,r.exports,a,o,s,u)}return s[e].exports}for(var c="function"==typeof require&&require,t=0;t<u.length;t++)l(u[t]);return l}({1:[function(t,e,n){"use strict";var i=t("../runtime/sprite"),r=t("../runtime/painter"),a=t("../player/mainball"),o=t("../runtime/timer"),s=t("../global"),u=new r("./assets/img/bar.png");u.rot=Math.PI,u.offset=20,u.paint=function(t,e){u.image.complete&&(e.save(),e.strokeStyle="#000",e.translate(a.x+a.entity.radius,a.y+a.entity.radius),e.rotate(u.rot),e.drawImage(this.image,u.offset,t.y,t.w,t.h),e.beginPath(),e.moveTo(-20,0),e.lineTo(-420,0),e.closePath(),e.stroke(),e.restore())};var l=new i("bar",u);l.setSite(0,0,300,8),l.cast=!1,l.hide=!1,l.strength=0,l.maxStrength=20,l.timer=new o,l.behaviors.push({name:"hide",execute:function(t){for(var e=0;e<s.ballList.length;e++){if(s.ballList[e].isMoving)return t.visible=!1,"interrupt"}if(-1===s.ballList.indexOf(a))return t.visible=!1,"interrupt";t.visible=!0}},{name:"addStrength",execute:function(t){t.cast&&(t.timer.isRunning()?60<t.timer.getElapsedTime()&&(t.addStrength(),t.timer.reset(),t.timer.start()):(t.timer.reset(),t.timer.start()))}}),l.addStrength=function(){l.strength<l.maxStrength&&(l.strength+=1,l.painter.offset+=2)},l.resetStrength=function(){l.strength=0,l.painter.offset=10,setTimeout(function(){l.painter.offset=20,l.hide=!0},100)},e.exports=l},{"../global":6,"../player/mainball":10,"../runtime/painter":14,"../runtime/sprite":17,"../runtime/timer":18}],2:[function(t,e,n){"use strict";var i=t("../runtime/sprite"),r=t("../runtime/painter"),a=(t("../runtime/timer"),new r("./assets/img/hardboard.png"));a.paint=function(t,e){a.image.complete&&e.drawImage(this.image,t.x,t.y,t.w,t.h)};var o=new i("board",a);o.setSite(-300,150,300,150),o.behaviors.push({name:"fly-in",execute:function(t){return t.x<250&&(t.x+=20),"interrupt"}},{name:"fly-out",execute:function(t){t.x<800&&(t.x+=20)}}),e.exports=o},{"../runtime/painter":14,"../runtime/sprite":17,"../runtime/timer":18}],3:[function(t,e,n){"use strict";var i=t("../runtime/sprite"),r=t("../runtime/painter"),a=t("../runtime/circle"),o=t("../ele/music"),s=t("../global"),u=new r("./assets/img/hole.png"),l=[];[{left:10,top:20},{left:370,top:20},{left:730,top:20},{left:10,top:362},{left:370,top:362},{left:730,top:362}].forEach(function(t,e){var n=new i("hole",u);n.setSite(t.left,t.top,60,60),n.entity=new a(t.left+30,t.top+30,30),(n.entity.express=n).behaviors.push({name:"contain",execute:function(t){for(var e=s.ballList.length-1;0<=e;e--){var n=s.ballList[e],i=t.entity.x-n.entity.x,r=t.entity.y-n.entity.y;Math.sqrt(i*i+r*r)<t.entity.radius-.6*n.entity.radius&&(s.ballList.splice(e,1),o.playGoal())}}}),l.push(n)}),e.exports=l},{"../ele/music":4,"../global":6,"../runtime/circle":12,"../runtime/painter":14,"../runtime/sprite":17}],4:[function(t,e,n){"use strict";var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bgmCollide=new Audio,this.bgmCollide.src="./assets/sound/collide.wav",this.bgmGoal=new Audio,this.bgmGoal.src="./assets/sound/goal.wav",this.bgmStrike=new Audio,this.bgmStrike.src="./assets/sound/strike.wav"}return i(t,[{key:"playCollide",value:function(){this.bgmCollide.currentTime=0,this.bgmCollide.play()}},{key:"playGoal",value:function(){this.bgmGoal.currentTime=0,this.bgmGoal.play()}},{key:"playStrike",value:function(){this.bgmStrike.currentTime=0,this.bgmStrike.play()}}]),t}();e.exports=new r},{}],5:[function(t,e,n){"use strict";var i=t("../runtime/sprite"),r=t("../runtime/painter"),a=t("../runtime/rectangle"),o=new i("table",new r("./assets/img/desk.png"));o.setSite(0,0,800,442),o.entity=new a(40,42,720,356),o.entity.express=o,e.exports=o},{"../runtime/painter":14,"../runtime/rectangle":15,"../runtime/sprite":17}],6:[function(t,e,n){"use strict";e.exports={ballList:[],stageIndex:0,stageLength:3,preState:void 0,once:function(t){return void 0===t._once||0===t._once?t:function(){}},freeze:function(t){t._once=1},restore:function(t){1===t._once&&(t._once=0)},isActive:function(t){return!t._once}}},{}],7:[function(t,e,n){"use strict";var s=t("./runtime/gameState"),u={play:t("./states/play"),notice:t("./states/notice"),start:t("./states/start")};window.onload=function(){var a=document.getElementById("main-canvas"),o=a.getContext("2d"),n=function(){};function i(t,e){var t=s[t];if("function"==typeof t){for(var n=arguments.length,i=Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];t.apply(void 0,[u[e],window,a,o].concat(i))}}s.push(u.start,window,a,o),window.requestAnimationFrame(function t(){var e=s.getStack();e.forEach(function(t){var e=(t.update||n)();i.apply(null,e),(t.render||n)(window,a,o)});window.requestAnimationFrame(t)})}},{"./runtime/gameState":13,"./states/notice":20,"./states/play":21,"./states/start":22}],8:[function(t,e,n){"use strict";var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var r=t("../runtime/sprite"),s=t("../runtime/circle"),u=t("../global"),a=t("../ele/music");function l(t,e){var n=v(t.vx,t.vy),i=y(0,0,t.vx,t.vy),r=v(e.vx,e.vy),a=y(0,0,e.vx,e.vy),o=y(t.x,t.y,e.x,e.y);"none"===i?i=o:"none"===a&&(a=o);var s=i-o,u=a-o,l=n*Math.cos(s),c=n*Math.sin(s),f=r*Math.cos(u),h=r*Math.sin(u),p=[f,l];f=p[1],i=(s=y(0,0,l=p[0],c))+o,a=(u=y(0,0,f,h))+o,n=v(l,c),r=v(f,h),t.express.setVelocity(n*Math.cos(i),n*Math.sin(i)),e.express.setVelocity(r*Math.cos(a),r*Math.sin(a))}function c(t,e,n){var i=v(e.x-t.x,e.y-t.y),r=t.radius+e.radius;if(r<=i)return!1;var a=t.x-t.vx/n,o=t.y-t.vy/n,s=e.x-e.vx/n,u=e.y-e.vy/n,l=v(s-a,u-o),c=(l-r-.1)/(l-i);t.setPosition(a+c*t.vx/n,o+c*t.vy),e.setPosition(s+c*e.vx/n,u+c*e.vy)}function v(t,e){return Math.sqrt(t*t+e*e)}function y(t,e,n,i){var r=n-t,a=i-e;return 0===a?0<r?0:r<0?Math.PI:"none":Math.acos(r/v(r,a))*a/Math.abs(a)}e.exports=function(t){function o(t,e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,e));return a.setSite(n-r,i-r,2*r,2*r),a.entity=new s(n,i,r),(a.entity.express=a).setVal(),a.setMotion(),a.testMoving(),a.collideRroup=[],u.ballList.push(a),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,r),i(o,[{key:"setVal",value:function(){this.fraction=.99,this.behaviors.push({name:"fraction",execute:function(t){var e=t.fraction;Math.pow(t.vx,2)+Math.pow(t.vy,2)<2&&(e=.98),Math.abs(t.vx)<.1&&Math.abs(t.vy)<.1&&t.setVelocity(0,0),t.setVelocity(e,e,!0)}})}},{key:"setMotion",value:function(){this.behaviors.push({name:"motion-and-collision",execute:function(e){for(var t=0;t<1;t++)e.x+=e.vx/1,e.y+=e.vy/1,e.entity.x+=e.entity.vx/1,e.entity.y+=e.entity.vy/1,u.ballList.forEach(function(t){t.name!==e.name&&(v(e.entity.x-t.entity.x,e.entity.y-t.entity.y)<e.entity.radius+t.entity.radius&&(a.playCollide(),c(e.entity,t.entity,1),l(e.entity,t.entity)))})}})}},{key:"testMoving",value:function(){this.behaviors.push({name:"test-is-moving",execute:function(t){0===t.vx&&0===t.vy?t.isMoving=!1:t.isMoving=!0}})}}]),o}()},{"../ele/music":4,"../global":6,"../runtime/circle":12,"../runtime/sprite":17}],9:[function(t,e,n){"use strict";var i=t("../runtime/painter"),r=t("./ball"),a=t("./stage"),o=t("../global"),s={black:new i("./assets/img/ball_black.png"),blue:new i("./assets/img/ball_blue.png"),red:new i("./assets/img/ball_red.png")};e.exports=function(){a["stage"+o.stageIndex].gameBall.forEach(function(t,e){new r("gameBall"+e,s[t.color],t.x,t.y,t.radius)})}},{"../global":6,"../runtime/painter":14,"./ball":8,"./stage":11}],10:[function(t,e,n){"use strict";var i=t("../runtime/painter"),r=t("./ball"),a=t("../ele/music"),o=new r("mainBall",new i("./assets/img/ball_main.png"),150,150,10);o.reset=function(){this.entity.x=200,this.entity.y=221,this.x=200-this.entity.radius,this.y=221-this.entity.radius,this.setVelocity(0,0)},o.reset(),o.strike=function(t,e){var n=t,i=-n*Math.cos(e),r=-n*Math.sin(e);this.setVelocity(i,r),a.playStrike()},e.exports=o},{"../ele/music":4,"../runtime/painter":14,"./ball":8}],11:[function(t,e,n){"use strict";var i=function(){for(var e=[],t=[],n=0;n<4;n++)for(var i=0;i<=n;i++)t.push({x:550+25*n,y:221-12.5*n+25*i});return t.forEach(function(t){e.push({x:t.x,y:t.y,color:"red",radius:10})}),e}();e.exports={stage1:{gameBall:[{x:350,y:350,color:"black",radius:10}]},stage2:{gameBall:[{x:225,y:198,color:"black",radius:10},{x:390,y:320,color:"blue",radius:10}]},stage3:{gameBall:i}}},{}],12:[function(t,e,n){"use strict";var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();t("./vector.js");var a=t("./shape.js");e.exports=function(t){function r(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return i.x=t,i.y=e,i.radius=n,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,a),i(r,[{key:"createPath",value:function(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),t.closePath()}},{key:"move",value:function(t,e){this.x+=t,this.y+=e}},{key:"setPosition",value:function(t,e){this.x=t,this.y=e,this.express&&(this.express.x=t-this.radius,this.express.y=e-this.radius)}}]),r}()},{"./shape.js":16,"./vector.js":19}],13:[function(t,e,n){"use strict";function o(){}var s=[],i={leave:o};s.push(i);var r={};function a(t,e){var n=s[s.length-1];(e.init||o)(e),e.init=void 0;for(var i=arguments.length,r=Array(2<i?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];return(n.leave||o).apply(void 0,r),0===t?s[s.length-1]=e:1===t&&s.push(e),(e.enter||o).apply(void 0,r)}r.switch=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return a.apply(void 0,[0,t].concat(n))},r.push=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return a.apply(void 0,[1,t].concat(n))},r.pop=function(t){if(s.length<2)throw"Error in gameState: not enough states.";for(var e=s.pop(),n=arguments.length,i=Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(e.leave||o).apply(void 0,i),(s[s.length-1].resume||o).apply(void 0,[e].concat(i))},r.getStack=function(){return s.slice()},e.exports=r},{}],14:[function(t,e,n){"use strict";var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.exports=function(){function e(t){r(this,e),this.image=new Image,this.image.src=t}return i(e,[{key:"paint",value:function(t,e){this.image.complete&&e.drawImage(this.image,t.x,t.y,t.w,t.h)}}]),e}();!function(){function n(t,e){r(this,n),this.cells=e||[],this.cellIndex=0,this.image=new Image,this.image.src=t}i(n,[{key:"advance",value:function(){this.cellIndex===this.cells.length-1?this.cellIndex=0:this.cellIndex++}},{key:"paint",value:function(t,e){if(this.image.complete){var n=this.cells[this.cellIndex];e.drawImage(this.image,n.x,n.y,n.w,n.h,t.left,t.top,t.width,t.height)}}}])}()},{}],15:[function(t,e,n){"use strict";var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();t("./vector.js");var r=t("./shape.js");e.exports=function(t){function a(t,e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return r.x=t,r.y=e,r.w=n,r.h=i,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,r),i(a,[{key:"collideWithCircle",value:function(t){t.x+t.radius>this.x+this.w||t.x-t.radius<this.x?(t.x-=t.vx,t.vx=-t.vx,void 0!==t.express&&(t.express.x=t.x-t.radius,t.express.vx=t.vx)):(t.y+t.radius>this.y+this.h||t.y-t.radius<this.y)&&(t.y-=t.vy,t.vy=-t.vy,void 0!==t.express&&(t.express.y=t.y-t.radius,t.express.vy=t.vy))}},{key:"createPath",value:function(t){t.beginPath(),t.rect(this.x,this.y,this.w,this.h),t.closePath()}},{key:"move",value:function(t,e){this.x+=t,this.y+=e}}]),a}()},{"./shape.js":16,"./vector.js":19}],16:[function(t,e,n){"use strict";var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();e.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=void 0,this.y=void 0,this.vx=0,this.vy=0,this.strokeStyle="rgba(255, 253, 208, 0.9)",this.fillStyle="rgba(147, 197, 114, 0.8)",this.express=void 0}return i(t,[{key:"move",value:function(t,e){throw"move(dx, dy) is not implemented"}},{key:"createPath",value:function(t){throw"createPath(ctx) is not implemented"}},{key:"fill",value:function(t){t.save(),t.fillStyle=this.fillStyle,this.createPath(t),t.fill(),t.restore()}},{key:"stroke",value:function(t){t.save(),t.strokeStyle=this.strokeStyle,this.createPath(t),t.stroke(),t.restore()}},{key:"isPointInPath",value:function(t,e,n){return this.createPath(t),t.isPointInPath(e,n)}}]),t}()},{}],17:[function(t,e,n){"use strict";var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();e.exports=function(){function i(t,e,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),void 0!==t&&(this.name=t),void 0!==e&&(this.painter=e),this.setSite(0,0,32,32),this.vx=0,this.vy=0,this.visible=!0,this.moving=!1,this.behaviors=n||[],this.entity=void 0,this}return r(i,[{key:"setSite",value:function(t,e,n,i){this.x=t,this.y=e,this.w=n,this.h=i}},{key:"setVelocity",value:function(t,e,n){n?(this.vx*=t,this.vy*=e,this.entity&&(this.entity.vx*=t,this.entity.vy*=e)):(this.vx=t,this.vy=e,this.entity&&(this.entity.vx=t,this.entity.vy=e))}},{key:"paint",value:function(t){this.painter&&this.visible&&this.painter.paint(this,t)}},{key:"update",value:function(){for(var t=0;t<this.behaviors.length;t++){var e=this.behaviors[t];if(!0!==e.idle)var n=e.execute(this);if("interrupt"===n)break}}}]),i}()},{}],18:[function(t,e,n){"use strict";var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();e.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset()}return i(t,[{key:"start",value:function(){this.startTime=+new Date,this.running=!0,this.elapsed=0}},{key:"stop",value:function(){this.running=!1,this.elapsed=+new Date-this.startTime}},{key:"isRunning",value:function(){return this.running}},{key:"getElapsedTime",value:function(){return this.running?+new Date-this.startTime:this.elapsed}},{key:"reset",value:function(){this.startTime=0,this.running=!1,this.elapsed=0}}]),t}()},{}],19:[function(t,e,n){"use strict";var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();e.exports=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.x=t,this.y=e}return i(n,[{key:"getMagnitude",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"add",value:function(t){return new n(this.x+t.x,this.y+t.y)}},{key:"subtract",value:function(t){return new n(this.x-t.x,this.y-t.y)}},{key:"dotProduct",value:function(t){return this.x*t.x+this.y*t.y}},{key:"perpendicular",value:function(){return new n(this.y,-this.x)}},{key:"normalize",value:function(){var t=new n(0,0),e=this.getMagnitude();return 0!==e&&(t.x=this.x/e,t.y=this.y/e),t}},{key:"normal",value:function(){return this.perpendicular().normalize()}}]),n}()},{}],20:[function(t,e,n){"use strict";var a=t("../ele/board"),o=t("../global"),i=t("../player/gameball"),s=void 0,u=void 0,l=void 0,c=1,r=void 0,f={name:"state-notice",active:!1,noteString:[],init:function(){f.noteString=["Stage 1","Stage 2","Stage 3","Nice!","Trap!"]},enter:function(t,e,n,i,r){u=i,l=r,s=void 0,o.freeze(h),o.restore(p),a.behaviors[0].idle=!1,2===u?c=4:1===u&&(c=o.stageIndex);a.x=-300,setTimeout(function(){e.addEventListener("mouseup",p,!1)},500)},leave:function(t,e,n){o.preState=f.name,e.removeEventListener("mouseup",p)},update:function(){r=void 0,a.update(),s&&(s=void 0,setTimeout(function(){o.restore(h)},500));void 0!==(r=o.once(h).call(null))&&o.freeze(h);return r},render:function(t,e,n){a.paint(n),i=n,i.save(),i.textAlign="center",i.font="36px Lucida Sans Unicode, Lucida Grande, sans-serif",i.fillText(f.noteString[c],a.x+a.w/2,a.y+a.h/2,a.w),i.restore();var i}};function h(){return o.stageIndex>o.stageLength?["switch","start"]:["pop",null]}function p(t){s=1,o.isActive(p)&&(1===u?(o.stageIndex+=1,o.stageIndex<=o.stageLength&&(l&&(o.ballList.length=0,l.reset(),o.ballList.push(l)),i())):2===u&&l&&(l.reset(),o.ballList.length=0,o.ballList.push(l),i()),a.behaviors[0].idle=!0,o.freeze(p))}e.exports=f},{"../ele/board":2,"../global":6,"../player/gameball":9}],21:[function(t,e,n){"use strict";var a=t("../ele/table"),o=t("../ele/hole"),s=t("../ele/bar"),u=t("../player/mainball"),i=t("../player/gameball"),l=t("../global"),r=void 0,c={name:"state-play",enter:f,leave:function(t,e,n){l.preState=c.name,e.removeEventListener("mousemove",p),e.removeEventListener("mousedown",v),e.removeEventListener("mouseup",y)},resume:function(t,e,n,i){l.restore(h),f(e,n,i)},update:function(){r=void 0,l.ballList.forEach(function(t){t.update(),a.entity.collideWithCircle(t.entity)}),o.forEach(function(t){t.update()}),s.update(),void 0!==(r=l.once(h).call(null))&&l.freeze(h);return r},render:function(t,e,n){var i=e.width,r=e.height;n.clearRect(0,0,i,r),function e(t,n){t instanceof Array?t.forEach(function(t){e(t,n)}):t.visible&&(t.paint(n),t.entity&&t.fraction&&(t.entity.createPath(n),t.entity.stroke(n)))}([a,o,l.ballList,s],n)}};function f(t,e,n){"state-start"===l.preState&&(l.stageIndex=1,u.reset(),i()),e.addEventListener("mousemove",p,!1),e.addEventListener("mousedown",v,!1),e.addEventListener("mouseup",y,!1)}function h(){return-1===l.ballList.indexOf(u)?["push","notice",2,u]:l.ballList.length<=1?["push","notice",1,u]:void 0}function p(t){var e=t.offsetX,n=t.offsetY,i=u.entity.x,r=u.entity.y,a=Math.asin((n-r)/Math.sqrt(Math.pow(e-i,2)+Math.pow(n-r,2)))+Math.PI;a=i<e?a:Math.PI-a,s.painter.rot=a}function v(t){t.offsetX,t.offsetY;s.cast=!0}function y(t){3<s.strength&&u.strike(s.strength,s.painter.rot),s.cast=!1,s.resetStrength()}e.exports=c},{"../ele/bar":1,"../ele/hole":3,"../ele/table":5,"../global":6,"../player/gameball":9,"../player/mainball":10}],22:[function(t,e,n){"use strict";var i=t("../global"),r=void 0,a=1,o=new Image,s={name:"state-start",init:function(){o.src="./assets/img/cover.png"},enter:function(t,e,n){r=void 0,e.addEventListener("mouseup",u,!1)},leave:function(t,e,n){i.stageIndex=1,i.preState=s.name,e.removeEventListener("mouseup",u)},update:function(){if(1===r)return void 0===i.preState?["switch","play"]:["pop",null];a+=.03},render:function(t,e,n){o.complete&&n.drawImage(o,0,0,e.width,e.height);!function(t){t.save(),t.font="30px Comic Sans MS, cursive, sans-serif";var e=Math.abs(Math.sin(a));t.fillStyle="rgba(0, 0, 0, "+e+")",t.fillText("Press Start",470,300),t.restore()}(n)}};function u(t){r=1}e.exports=s},{"../global":6}]},{},[7]);